##Domain file format for hybriddomain project
##Version 1 domain (.dom)

# Domain geometry
##!  uint8: 254
##!  uint8: file format version major
##!  uint8: file format version minor

##!  3*float64: StartTime, FinishTime, Initial timestep
##!  float64: save interval
##!  3* float64: dx, dy, dz
##!  int32 Cell Size
##!  int32 Halo Size

### blocks 
##!  int32: number of blocks N_B
### following are N_B 1-2-3d blocks one by one
### BEGINNING OF BLOCK
##!  int32 dimension Db (can be 1,2 or 3) 
##!  int32 computation node
##!  int32 computation device type
##!  int32 computation device number
##!  Db*int32: offset x, y, z (in number of grid steps) 
##!  Db*int32: xc, yc, and zc number of grid steps in this block, total=xc*yc*zc
### properties of every volume
##!  total*uint16: function number 
### END OF BLOCK

### Interconnects 
##!  int32: number of interconnects N_I
### following are N_I interconnects one by one
### BEGINNING OF IC
##!  int32 dimension I_d (can be 0,1,2)
##!  int32 interconnect length
##!  int32 source block 
##!  int32 destination block
##!  int32 source side (0-5)
##!  int32 destination side (0-5)
##!  I_d*int32 source offset 
##!  I_d*int32 destination offset
### END OF IC
===============================================================================
## State file format (*.bin)
##!  uint8: 253
##!  uint8: file format version major
##!  uint8: file format version minor

##!  float64 current time 
##!  int32 Cell size
###  following is the N_B  blocks one by one
###  BEGINNING OF THE BLOCK
##!   int32 dimension Db (can be 1,2 or 3) 
##!   Db*int32 xc, (yc), (zc) - block size. Total=xc*yc*zc
##!   total*cellsize*float64: state 
###  END OF THE BLOCK



Порядок функций

0: центральная функция
далее в цикле по каждому слою гало:
  граничные функции по умолчанию (непроницаемость)
  2 для одномерного блока
    x0, x1
  8 для двумерного блока
    x0y0, x1y0, x0y1, x1y1, -углы
    x0, x1, y0, y1 - стороны
  26 для трехмерного блока          
    x0y0z0, x1y0z0, x0y1z0, x1y1z0, x0y0z1, x1y0z1, x0y1z1, x1y1z1 - вершины
    x0z0, x1z0, y0z0, y1z0,  x0z1, x1z1, y0z1, y1z1,  x0y0, x1y0, x0y1, x1y1 - ребра
    x0, x1, y0, y1, z0, z1 - грани
  --
  далее граничные функции пользователя
  для одномерного блока в порядке пользователя
  для двумерного блока в порядке пользователя плюс дополнительно левое или правое или оба 
  угловых условия в случае, если условие затрагивает угол (углы)
    порядок: ближний к нулю угол (если нужен), основная функция, дальний от нуля угол (если нужен)
  для трехмерного блока в порядке пользователя, плюс если условие затрагивает границы
    порядок: если на стороне z0 или z1, то x0, x1, y0, y1
    в рамках каждого ребра если условие задевает вершину, то порядок такой же, как в двумерном случае
  --
  далее склейки с другими блоками, порядок тот же, что и для граничных функций     
--конец цикла по слоям гало  
  